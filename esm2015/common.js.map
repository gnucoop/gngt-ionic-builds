{"version":3,"file":"common.js","sources":["../../../src/ionic/common/common-module.ts","../../../src/ionic/common/input-aria-label.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {InputAriaLabelDirective} from './input-aria-label';\n\n@NgModule({\n  declarations: [\n    InputAriaLabelDirective,\n  ],\n  exports: [\n    InputAriaLabelDirective,\n  ]\n})\nexport class CommonModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  AfterViewInit, Directive, ElementRef, Input, Host, OnDestroy, Optional, Renderer2\n} from '@angular/core';\n\nimport {Subscription} from 'rxjs';\n\nimport {IonInput} from '@ionic/angular';\n\n@Directive({selector: '[gngtInputAriaLabel]'})\nexport class InputAriaLabelDirective implements AfterViewInit, OnDestroy {\n  private _inputLoadSub: Subscription = Subscription.EMPTY;\n\n  constructor(\n    @Host() @Optional() private _input: IonInput,\n    private _el: ElementRef,\n    private _renderer: Renderer2\n  ) { }\n\n  private _gngtInputAriaLabel: string;\n  @Input('gngtInputAriaLabel') set gngtInputAriaLabel(gngtInputAriaLabel: string) {\n    this._gngtInputAriaLabel = gngtInputAriaLabel;\n    this._updateLabel();\n  }\n\n  ngAfterViewInit(): void {\n    this._updateLabel();\n  }\n\n  ngOnDestroy(): void {\n    this._inputLoadSub.unsubscribe();\n  }\n\n  private _updateLabel(): void {\n    if (this._input && this._el) {\n      const el = this._el.nativeElement as HTMLElement;\n      if (el) {\n        this._setLabelOnChildren(el.getElementsByTagName('input'));\n\n        if (el.shadowRoot) {\n          this._setLabelOnChildren(el.shadowRoot.querySelectorAll('input'));\n        }\n      }\n    }\n  }\n\n  private _setLabelOnChildren(\n    inputs: HTMLCollectionOf<HTMLInputElement> | NodeListOf<HTMLInputElement>\n  ): void {\n    const inputsNum = inputs.length;\n    for (let i = 0 ; i < inputsNum ; i++) {\n      const input = inputs.item(i);\n      if (input) {\n        this._setLabel(input);\n      }\n    }\n  }\n\n  private _setLabel(el: HTMLInputElement): void {\n    this._renderer.setAttribute(el, 'aria-label', this._gngtInputAriaLabel);\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8BA,MAAa,uBAAuB,CAApC;;;;;;IAGE,WAAF,CACgC,MAAgB,EACpC,GAAe,EACf,SAAoB,EAHhC;QACgC,IAAhC,CAAA,MAAsC,GAAN,MAAM,CAAU;QACpC,IAAZ,CAAA,GAAe,GAAH,GAAG,CAAY;QACf,IAAZ,CAAA,SAAqB,GAAT,SAAS,CAAW;QALtB,IAAV,CAAA,aAAuB,GAAiB,YAAY,CAAC,KAAK,CAAC;KAMpD;;;;;IAGL,IAAiC,kBAAkB,CAAC,kBAA0B,EAAhF;QACI,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;QAC9C,IAAI,CAAC,YAAY,EAAE,CAAC;KACrB;;;;IAED,eAAe,GAAjB;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;KACrB;;;;IAED,WAAW,GAAb;QACI,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;KAClC;;;;;IAEO,YAAY,GAAtB;QACI,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,EAAE;;YACjC,MAAY,EAAE,sBAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAe,CAAtD;YACM,IAAI,EAAE,EAAE;gBACN,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC;gBAE3D,IAAI,EAAE,CAAC,UAAU,EAAE;oBACjB,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC;iBACnE;aACF;SACF;KACF;;;;;;IAEO,mBAAmB,CACzB,MAAyE,EAD7E;;QAGA,MAAU,SAAS,GAAG,MAAM,CAAC,MAAM,CAAnC;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAG,CAAC,GAAG,SAAS,EAAG,CAAC,EAAE,EAAE;;YAC1C,MAAY,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAlC;YACM,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aACvB;SACF;KACF;;;;;;IAEO,SAAS,CAAC,EAAoB,EAAxC;QACI,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;KACzE;;;IAnDH,EAAA,IAAA,EAAC,SAAS,EAAV,IAAA,EAAA,CAAW,EAAC,QAAQ,EAAE,sBAAsB,EAAC,EAA7C,EAAA;;;;IAFA,EAAA,IAAA,EAAQ,QAAQ,EAAhB,UAAA,EAAA,CAAA,EAAA,IAAA,EAOK,IAAI,EAPT,EAAA,EAAA,IAAA,EAOa,QAAQ,EAPrB,CAAA,EAAA;IALA,EAAA,IAAA,EAA4B,UAAU,EAAtC;IAAA,EAAA,IAAA,EAA0E,SAAS,EAAnF;;;IAkBA,kBAAA,EAAA,CAAA,EAAA,IAAA,EAAG,KAAK,EAAR,IAAA,EAAA,CAAS,oBAAoB,EAA7B,EAAA,CAAA;;;;;;;ADPA,MAAa,YAAY,CAAzB;;;IARA,EAAA,IAAA,EAAC,QAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,YAAY,EAAE;oBACZ,uBAAuB;iBACxB;gBACD,OAAO,EAAE;oBACP,uBAAuB;iBACxB;aACF,EAAD,EAAA;;;;;"}