{"version":3,"file":"common.es5.js","sources":["../../../src/ionic/common/common-module.ts","../../../src/ionic/common/input-aria-label.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {NgModule} from '@angular/core';\n\nimport {InputAriaLabelDirective} from './input-aria-label';\n\n@NgModule({\n  declarations: [\n    InputAriaLabelDirective,\n  ],\n  exports: [\n    InputAriaLabelDirective,\n  ]\n})\nexport class CommonModule { }\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  AfterViewInit, Directive, ElementRef, Input, Host, OnDestroy, Optional, Renderer2\n} from '@angular/core';\n\nimport {Subscription} from 'rxjs';\n\nimport {IonInput} from '@ionic/angular';\n\n@Directive({selector: '[gngtInputAriaLabel]'})\nexport class InputAriaLabelDirective implements AfterViewInit, OnDestroy {\n  private _inputLoadSub: Subscription = Subscription.EMPTY;\n\n  constructor(\n    @Host() @Optional() private _input: IonInput,\n    private _el: ElementRef,\n    private _renderer: Renderer2\n  ) { }\n\n  private _gngtInputAriaLabel: string;\n  @Input('gngtInputAriaLabel') set gngtInputAriaLabel(gngtInputAriaLabel: string) {\n    this._gngtInputAriaLabel = gngtInputAriaLabel;\n    this._updateLabel();\n  }\n\n  ngAfterViewInit(): void {\n    this._updateLabel();\n  }\n\n  ngOnDestroy(): void {\n    this._inputLoadSub.unsubscribe();\n  }\n\n  private _updateLabel(): void {\n    if (this._input && this._el) {\n      const el = this._el.nativeElement as HTMLElement;\n      if (el) {\n        this._setLabelOnChildren(el.getElementsByTagName('input'));\n\n        if (el.shadowRoot) {\n          this._setLabelOnChildren(el.shadowRoot.querySelectorAll('input'));\n        }\n      }\n    }\n  }\n\n  private _setLabelOnChildren(\n    inputs: HTMLCollectionOf<HTMLInputElement> | NodeListOf<HTMLInputElement>\n  ): void {\n    const inputsNum = inputs.length;\n    for (let i = 0 ; i < inputsNum ; i++) {\n      const input = inputs.item(i);\n      if (input) {\n        this._setLabel(input);\n      }\n    }\n  }\n\n  private _setLabel(el: HTMLInputElement): void {\n    this._renderer.setAttribute(el, 'aria-label', this._gngtInputAriaLabel);\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6BA,IAAA,uBAAA,kBAAA,YAAA;IAIE,SAAF,uBAAA,CACgC,MAAgB,EACpC,GAAe,EACf,SAAoB,EAHhC;QACgC,IAAhC,CAAA,MAAsC,GAAN,MAAM,CAAU;QACpC,IAAZ,CAAA,GAAe,GAAH,GAAG,CAAY;QACf,IAAZ,CAAA,SAAqB,GAAT,SAAS,CAAW;QALtB,IAAV,CAAA,aAAuB,GAAiB,YAAY,CAAC,KAAK,CAAC;KAMpD;IAGL,MAAF,CAAA,cAAA,CAAmC,uBAAnC,CAAA,SAAA,EAAA,oBAAqD,EAArD;;;;;QAAE,UAAoD,kBAA0B,EAAhF;YACI,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;YAC9C,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;;;KAAH,CAAA,CAAG;;;;IAED,uBAAF,CAAA,SAAA,CAAA,eAAiB;;;IAAf,YAAF;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;KACrB,CAAH;;;;IAEE,uBAAF,CAAA,SAAA,CAAA,WAAa;;;IAAX,YAAF;QACI,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;KAClC,CAAH;;;;;IAEU,uBAAV,CAAA,SAAA,CAAA,YAAsB;;;;IAApB,YAAF;QACI,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,EAAE;;YACjC,IAAY,EAAE,sBAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAe,CAAtD;YACM,IAAI,EAAE,EAAE;gBACN,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC;gBAE3D,IAAI,EAAE,CAAC,UAAU,EAAE;oBACjB,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC;iBACnE;aACF;SACF;KACF,CAAH;;;;;;IAEU,uBAAV,CAAA,SAAA,CAAA,mBAA6B;;;;;IAA3B,UACE,MAAyE,EAD7E;;QAGA,IAAU,SAAS,GAAG,MAAM,CAAC,MAAM,CAAnC;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAG,CAAC,GAAG,SAAS,EAAG,CAAC,EAAE,EAAE;;YAC1C,IAAY,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAlC;YACM,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aACvB;SACF;KACF,CAAH;;;;;;IAEU,uBAAV,CAAA,SAAA,CAAA,SAAmB;;;;;IAAjB,UAAkB,EAAoB,EAAxC;QACI,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;KACzE,CAAH;;QAnDA,EAAA,IAAA,EAAC,SAAS,EAAV,IAAA,EAAA,CAAW,EAAC,QAAQ,EAAE,sBAAsB,EAAC,EAA7C,EAAA;;;;QAFA,EAAA,IAAA,EAAQ,QAAQ,EAAhB,UAAA,EAAA,CAAA,EAAA,IAAA,EAOK,IAAI,EAPT,EAAA,EAAA,IAAA,EAOa,QAAQ,EAPrB,CAAA,EAAA;QALA,EAAA,IAAA,EAA4B,UAAU,EAAtC;QAAA,EAAA,IAAA,EAA0E,SAAS,EAAnF;;;QAkBA,kBAAA,EAAA,CAAA,EAAA,IAAA,EAAG,KAAK,EAAR,IAAA,EAAA,CAAS,oBAAoB,EAA7B,EAAA,CAAA;;IAyCA,OAAA,uBAAC,CAAD;CAAC,EAAD,CAAA;;;;;;ADxDA,IAAA,YAAA,kBAAA,YAAA;IAAA,SAAA,YAAA,GAAA;KAQ6B;;QAR7B,EAAA,IAAA,EAAC,QAAQ,EAAT,IAAA,EAAA,CAAU;oBACR,YAAY,EAAE;wBACZ,uBAAuB;qBACxB;oBACD,OAAO,EAAE;wBACP,uBAAuB;qBACxB;iBACF,EAAD,EAAA;;IAC4B,OAA5B,YAA6B,CAA7B;CAA6B,EAA7B,CAAA;;;;"}