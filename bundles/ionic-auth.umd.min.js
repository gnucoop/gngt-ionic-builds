/**
 * @license
 * Copyright (C) 2018 Gnucoop soc. coop.
 *
 * This file is part of the Gnucoop Angular Toolkit (gngt).
 *
 * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.
 *
 */
!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/common/http"),require("@angular/core"),require("@angular/forms"),require("@ionic/angular"),require("@ngx-translate/core"),require("@gngt/core/common"),require("@gngt/core/auth"),require("@gngt/ionic/common"),require("rxjs"),require("rxjs/operators"),require("@ngrx/store")):"function"==typeof define&&define.amd?define("@gngt/ionic/auth",["exports","@angular/common","@angular/common/http","@angular/core","@angular/forms","@ionic/angular","@ngx-translate/core","@gngt/core/common","@gngt/core/auth","@gngt/ionic/common","rxjs","rxjs/operators","@ngrx/store"],e):e(((o=o||self).dewco=o.dewco||{},o.dewco.ionic=o.dewco.ionic||{},o.dewco.ionic.auth={}),o.ng.common,o.ng.common.http,o.ng.core,o.ng.forms,o.ionic.angular,o.ngxt.core,o.gngt.core.common,o.gngt.core.auth,o.gngt.ionic.common,o.rxjs,o.rxjs.operators,o.ngrx.store)}(this,function(o,t,n,r,i,a,s,c,u,l,g,p,e){"use strict";var m=function(o,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t])})(o,e)};function d(o,e){function t(){this.constructor=o}m(o,e),o.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var f=function(r){function o(o,e,t){var n=r.call(this)||this;return n.ts=o,n.alert=e,n.toast=t,n}return d(o,r),o.prototype.askLogoutConfirm=function(){var e=this;return this.ts.get(["Are you sure you want to logout?","Cancel","Ok"]).pipe(p.switchMap(function(o){return g.from(e.alert.create({message:o[0],buttons:[{text:o[1],role:"cancel"},{text:o[2],role:"confirm"}]}))}),p.switchMap(function(o){return g.from(o.present()).pipe(p.mapTo(o))}),p.switchMap(function(o){return g.from(o.onDidDismiss())}),p.map(function(o){return"confirm"===o.role}))},o.prototype.showLoginError=function(o){this.toast.create({message:o,showCloseButton:!1,duration:3e3}).then(function(o){return o.present()})},o}(u.AuthUserInteractionsService),h=function(n){function o(o,e,t){return n.call(this,o,e,t)||this}return d(o,n),o.decorators=[{type:r.Component,args:[{selector:"gngt-login",template:'<ion-card><ion-card-header><ion-card-title translate>Login</ion-card-title></ion-card-header><ion-card-content><ion-list [formGroup]="loginForm" [gngtFormDisabled]="disabled" class="login-form" (keyup.enter)="login()"><ion-item><ion-label translate>Username</ion-label><ion-input [gngtInputAriaLabel]="\'Username\' | translate" autocomplete="username" formControlName="username"></ion-input></ion-item><ion-item><ion-label translate>Password</ion-label><ion-input [gngtInputAriaLabel]="\'Password\' | translate" type="password" autocomplete="current-password" formControlName="password"></ion-input></ion-item></ion-list><div class="ion-actions"><ion-button translate [disabled]="(valid|async) === false" (click)="login()">Login</ion-button></div></ion-card-content></ion-card>',styles:["gngt-login{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center}gngt-login .ion-actions{padding-top:1em;text-align:right}"],changeDetection:r.ChangeDetectionStrategy.OnPush,encapsulation:r.ViewEncapsulation.None,inputs:["disabled"]}]}],o.ctorParameters=function(){return[{type:i.FormBuilder},{type:e.Store},{type:r.ChangeDetectorRef}]},o}(u.LoginComponent),y=function(){function e(){}return e.forRoot=function(o){return{ngModule:e,providers:[{provide:n.HTTP_INTERCEPTORS,useClass:u.JwtInterceptor,multi:!0},o.jwtOptionsProvider||{provide:u.JWT_OPTIONS,useValue:o.jwtConfig},o.authOptionsProvider||{provide:u.AUTH_OPTIONS,useValue:o.authConfig},u.JwtHelperService]}},e.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,i.ReactiveFormsModule,a.IonicModule,s.TranslateModule,c.CommonModule,l.CommonModule,u.AuthModule],declarations:[h],exports:[h],providers:[{provide:u.AuthUserInteractionsService,useClass:f,deps:[s.TranslateService,a.AlertController,a.ToastController]}]}]}],e}();o.AuthModule=y,o.LoginComponent=h,o.Éµa=f,Object.defineProperty(o,"__esModule",{value:!0})});
//# sourceMappingURL=ionic-auth.umd.min.js.map
