/**
 * @license
 * Copyright (C) 2018 Gnucoop soc. coop.
 *
 * This file is part of the Gnucoop Angular Toolkit (gngt).
 *
 * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@angular/router"),require("@ionic/angular"),require("@gic/angular"),require("@ngx-translate/core"),require("@gngt/core/common"),require("rxjs"),require("rxjs/operators"),require("@gngt/core/admin")):"function"==typeof define&&define.amd?define("@gngt/ionic/admin",["exports","@angular/common","@angular/core","@angular/forms","@angular/router","@ionic/angular","@gic/angular","@ngx-translate/core","@gngt/core/common","rxjs","rxjs/operators","@gngt/core/admin"],t):t(((e=e||self).gngt=e.gngt||{},e.gngt.ionic=e.gngt.ionic||{},e.gngt.ionic.admin={}),e.ng.common,e.ng.core,e.ng.forms,e.ng.router,e.ionic.angular,e.gic.angular,e.ngxt.core,e.gngt.core.common,e.rxjs,e.rxjs.operators,e.gngt.core.admin)}(this,function(e,t,n,i,o,r,a,l,c,s,d,g){"use strict";var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function m(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p,f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=(m(b,p=g.AdminUserInteractionsService),b.prototype.askDeleteConfirm=function(){var t=this;return this._ts.get(["Are you sure you want to delete?","Cancel","Ok"]).pipe(d.switchMap(function(e){return s.from(t._alert.create({message:e[0],buttons:[{text:e[1],role:"cancel"},{text:e[2],role:"confirm"}]}))}),d.switchMap(function(e){return s.from(e.present()).pipe(d.mapTo(e))}),d.switchMap(function(e){return s.from(e.onDidDismiss())}),d.map(function(e){return"confirm"===e.role}))},b.decorators=[{type:n.Injectable}],b.ctorParameters=function(){return[{type:r.AlertController},{type:l.TranslateService}]},b);function b(e,t){var n=p.call(this)||this;return n._alert=e,n._ts=t,n}var y,v=(m(x,y=g.AdminEditComponent),x.decorators=[{type:n.Component,args:[{selector:"gngt-admin-edit",template:'<ion-card *ngIf="form|async as editForm"><ion-card-header><ion-card-title>{{ title }} <span *ngIf="editForm.value[\'id\']">#{{ editForm.value[\'id\'] }}</span></ion-card-title></ion-card-header><ion-card-content><ion-list [formGroup]="editForm" [gngtFormDisabled]="loading|async"><ng-container *ngFor="let field of fields"><ng-container *ngIf="!field.hidden"><ng-container [ngSwitch]="field.type"><ion-item *ngSwitchCase="\'input\'"><ion-label>{{ field.label | translate }}</ion-label><ion-input [formControlName]="field.name" [type]="field.subtype || \'text\'" [readonly]="field.readonly"></ion-input></ion-item><ion-item *ngSwitchCase="\'textarea\'"><ion-label>{{ field.label | translate }}</ion-label><ion-textarea [formControlName]="field.name"></ion-textarea></ion-item><ion-item *ngSwitchCase="\'checkbox\'"><ion-label>{{ field.label | translate }}</ion-label><ion-checkbox slot="start" [formControlName]="field.name"></ion-checkbox></ion-item><ion-item *ngSwitchCase="\'radio\'"><ion-label class="gngt-radio-label">{{ field.label | translate }}</ion-label><div class="gngt-radio-container"><ion-radio-group [formControlName]="field.name"><div *ngFor="let choice of field.choices|async"><ion-radio [value]="choice.value"></ion-radio><ion-label>{{ choice.label }}</ion-label></div></ion-radio-group></div></ion-item><ion-item *ngSwitchCase="\'select\'"><ion-label>{{ field.label | translate }}</ion-label><ion-select [formControlName]="field.name"><ion-select-option *ngFor="let choice of field.choices|async" [value]="choice.value">{{ choice.label }}</ion-select-option></ion-select></ion-item><ion-item *ngSwitchCase="\'multipleselect\'"><ion-label>{{ field.label | translate }}</ion-label><ion-select [formControlName]="field.name" multiple="multiple"><ion-select-option *ngFor="let choice of field.choices|async" [value]="choice.value">{{ choice.label }}</ion-select-option></ion-select></ion-item><ion-item *ngSwitchCase="\'autocomplete\'"><ion-label>{{ field.label | translate }}</ion-label><gic-autocomplete [formControlName]="field.name"><gic-autocomplete-option *ngFor="let choice of field.choices|async">{{ choice.label }}</gic-autocomplete-option></gic-autocomplete></ion-item></ng-container></ng-container></ng-container></ion-list><div class="ion-actions"><ion-spinner *ngIf="loading|async"></ion-spinner><ion-button (click)="save()" [disabled]="!editForm.valid || (canSave === false)">{{ saveLabel | translate }}</ion-button><ion-button (click)="goBack()" color="warning">{{ cancelLabel | translate }}</ion-button></div></ion-card-content></ion-card>',styles:["gngt-admin-edit{display:block}gngt-admin-edit>ion-card>ion-card-header{margin:-24px -24px 48px;padding:24px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}gngt-admin-edit>ion-card>ion-card-content .gngt-radio-label{flex:0 1 auto;max-width:200px}gngt-admin-edit>ion-card>ion-card-content .gngt-radio-container{display:inline-block;flex:1 1 auto}gngt-admin-edit>ion-card>ion-card-content .gngt-radio-container ion-radio-group{display:inline-block}gngt-admin-edit>ion-card>ion-card-content .gngt-radio-container ion-radio-group>div{display:inline-flex!important;align-items:center;position:relative;padding-left:8px;margin-right:.5em}gngt-admin-edit>ion-card>ion-card-content .gngt-radio-container ion-radio-group>div>ion-label,gngt-admin-edit>ion-card>ion-card-content .gngt-radio-container ion-radio-group>div>ion-radio{display:inline-block!important;margin-right:.5em}gngt-admin-edit>ion-card>ion-card-content>.ion-actions{text-align:right}"],changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,inputs:["title","listUrl","cancelLabel","saveLabel","service","fields","processFormData","processObject","id","readonly","hideSaveButton","canSave"],outputs:["valueChanges$"]}]}],x.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:i.FormBuilder},{type:o.Router}]},x);function x(e,t,n){return y.call(this,e,t,n)||this}var _,C=(m(S,_=g.AdminListComponent),Object.defineProperty(S.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"hasMore",{get:function(){return this._hasMore},enumerable:!0,configurable:!0}),S.prototype.ngOnDestroy=function(){_.prototype.ngOnDestroy.call(this),this._listSub.unsubscribe()},S.prototype.ngOnInit=function(){var t=this,e=this._getService();null!=e&&(this.baseListParams&&(null!=this.baseListParams.start&&(this._listParams.start=this.baseListParams.start),null!=this.baseListParams.limit&&(this._listParams.limit=this.baseListParams.limit)),this._listSub=e.getListObjects().pipe(d.filter(function(e){return null!=e})).subscribe(function(e){t.infiniteScroll&&t.infiniteScroll.complete(),t._items=t._items.concat(e.results||[]),t._hasMore=null!=e.next,t._cdr.markForCheck()}),this._loadList())},S.prototype.getSelection=function(){return[]},S.prototype.getItems=function(){return[]},S.prototype.clearSelection=function(){},S.prototype.selectAll=function(){},S.prototype.refreshList=function(){this._listParams.start=0,this._loadList()},S.prototype.loadMore=function(){this._listParams.start+=this._listParams.limit,this._loadList()},S.prototype._loadList=function(){var e=this._getService();if(null!=e&&this._hasMore){var t=f({},this.baseListParams||{},this._listParams);e.list(t)}},S.decorators=[{type:n.Component,args:[{selector:"gngt-admin-list",template:'<div><ion-card><ion-card-content><ion-content><ion-virtual-scroll [items]="items"><ion-item *virtualItem="let item">{{ item|json }}</ion-item></ion-virtual-scroll><ion-infinite-scroll *ngIf="hasMore" threshold="100px" (ionInfinite)="loadMore()"><ion-infinite-scroll-content loadingSpinner="bubbles"></ion-infinite-scroll-content></ion-infinite-scroll></ion-content></ion-card-content></ion-card></div>',styles:["gngt-admin-list{display:block;position:relative}gngt-admin-list>div{height:100%}gngt-admin-list>div>ion-card{height:calc(100% - 20px)}gngt-admin-list>div>ion-card>ion-card-content{height:100%}"],changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,inputs:["title","headers","displayedColumns","baseEditUrl","newItemPath","service"]}]}],S.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:h}]},S.propDecorators={baseListParams:[{type:n.Input}],infiniteScroll:[{type:n.ViewChild,args:[r.IonInfiniteScroll,{static:!0}]}]},S);function S(e,t){var n=_.call(this,e,t)||this;return n._items=[],n._hasMore=!0,n._listSub=s.Subscription.EMPTY,n._listParams={start:0,limit:20,sort:{}},n}var P=(w.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.ReactiveFormsModule,r.IonicModule,a.GicModule,o.RouterModule,l.TranslateModule,c.CommonModule],declarations:[v,C],exports:[v,C],providers:[h]}]}],w);function w(){}e.AdminEditComponent=v,e.AdminListComponent=C,e.AdminModule=P,e.AdminUserInteractionsService=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ionic-admin.umd.min.js.map
